注意：这篇文章请在浏览器里打开，否则代码会出问题（显示不出来）！
https://blog.csdn.net/PanDaoxi2020/article/details/107635648

我们来使用Python判断非正常拓展名插件。
需要的材料：
1. 1张图片（自行下载，复制图片到桌面，命名为`image.jpg`）
![背景图片](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729171151106.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BhbkRhb3hpMjAyMA==,size_16,color_FFFFFF,t_70)
2. Python3
3. PIL（自己pip安装）

首先新建一个Python文档，写入以下内容：

```python
#!usr/bin/python
# python : 3.6
# coding : utf-8
#导入包
from tkinter import Tk,Label,Button
from tkinter.messagebox import showinfo
from tkinter.filedialog import askopenfilename
from PIL import ImageTk

#设置插件密匙，根据刚才的代码自己复制，使用多行字符串，千万别忘了最后要有个空行！
code = '''66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
55555555555555555555555555555555555555555555555555555555555555555555555555555555
44444444444444444444444444444444444444444444444444444444444444444444444444444444
77777777777777777777777777777777777777777777777777777777777777777777777777777777
88888888888888888888888888888888888888888888888888888888888888888888888888888888
33333333333333333333333333333333333333333333333333333333333333333333333333333333
55555555555555555555555555555555555555555555555555555555555555555555555555555555
44444444444444444444444444444444444444444444444444444444444444444444444444444444
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
44444444444444444444444444444444444444444444444444444444444444444444444444444444
55555555555555555555555555555555555555555555555555555555555555555555555555555555
44444444444444444444444444444444444444444444444444444444444444444444444444444444
55555555555555555555555555555555555555555555555555555555555555555555555555555555
66666666666666666666666666666666666666666666666666666666666666666666666666666666
55555555555555555555555555555555555555555555555555555555555555555555555555555555
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
99999999999999999999999999999999999999999999999999999999999999999999999999999999
77777777777777777777777777777777777777777777777777777777777777777777777777777777
44444444444444444444444444444444444444444444444444444444444444444444444444444444
88888888888888888888888888888888888888888888888888888888888888888888888888888888
77777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777
55555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555
77777777777777777777777777777777777777777777777777777777777777777777777777777777
55555555555555555555555555555555555555555555555555555555555555555555555555555555
66666666666666666666666666666666666666666666666666666666666666666666666666666666
55555555555555555555555555555555555555555555555555555555555555555555555555555555
66666666666666666666666666666666666666666666666666666666666666666666666666666666
44444444444444444444444444444444444444444444444444444444444444444444444444444444
66666666666666666666666666666666666666666666666666666666666666666666666666666666
44444444444444444444444444444444444444444444444444444444444444444444444444444444
66666666666666666666666666666666666666666666666666666666666666666666666666666666
55555555555555555555555555555555555555555555555555555555555555555555555555555555
99999999999999999999999999999999999999999999999999999999999999999999999999999999
55555555555555555555555555555555555555555555555555555555555555555555555555555555
77777777777777777777777777777777777777777777777777777777777777777777777777777777
99999999999999999999999999999999999999999999999999999999999999999999999999999999
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
55555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555
44444444444444444444444444444444444444444444444444444444444444444444444444444444
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
88888888888888888888888888888888888888888888888888888888888888888888888888888888
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
99999999999999999999999999999999999999999999999999999999999999999999999999999999
55555555555555555555555555555555555555555555555555555555555555555555555555555555
44444444444444444444444444444444444444444444444444444444444444444444444444444444
88888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777
33333333333333333333333333333333333333333333333333333333333333333333333333333333
66666666666666666666666666666666666666666666666666666666666666666666666666666666
33333333333333333333333333333333333333333333333333333333333333333333333333333333
66666666666666666666666666666666666666666666666666666666666666666666666666666666
33333333333333333333333333333333333333333333333333333333333333333333333333333333
55555555555555555555555555555555555555555555555555555555555555555555555555555555
77777777777777777777777777777777777777777777777777777777777777777777777777777777
33333333333333333333333333333333333333333333333333333333333333333333333333333333
88888888888888888888888888888888888888888888888888888888888888888888888888888888
55555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555
77777777777777777777777777777777777777777777777777777777777777777777777777777777
99999999999999999999999999999999999999999999999999999999999999999999999999999999
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
88888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888
66666666666666666666666666666666666666666666666666666666666666666666666666666666
88888888888888888888888888888888888888888888888888888888888888888888888888888888
55555555555555555555555555555555555555555555555555555555555555555555555555555555
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
66666666666666666666666666666666666666666666666666666666666666666666666666666666
77777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777
'''

#创建窗口方法
def box(message,title = '通知'):
    showinfo(title = title,message = message)

#创建选择图片方法
def selectPlugin():
    #隐藏窗口
    window = Tk()
    window.withdraw()
    #选择文件对话框
    file = askopenfilename(initialdir = 'C:/Windows/System32',title = '请选择插件并上传！')
    #在这里嵌套判断格式是否正确
    try:
        #判断是否选择
        if len(file) == 0:
            box('请选择文件！')
        else:
            #打开文件
            with open(file,'r') as plugin:
                text = plugin.read()
                #验证密匙
                if text == code:
                    box('上传成功！\n验证成功！')
                    #设置一次性，使用后作废（新增内容）
                    #不想要可以删掉
                    with open(file,'a') as add:
                        add.write(code)
                    
                    #在这里可以设置用户需要的代码，最好是调用方法的方式
                else:
                    #反馈结果
                    box('识别失败！请重试！')
    except UnicodeDecodeError:
        #识别错误
        box('格式有误或者拓展名错误！')
    
    window.mainloop()

#创建窗口方法  
def window():
    #tkinter 设置窗口属性
    window = Tk()
    window.resizable(0,0)
    window.title('选择插件并上传')
    #导入图片
    img = ImageTk.PhotoImage(file = 'image.jpg')
    #显示图片和按钮
    Label(window,image = img).pack()
    Button(window,text = '选择插件',font = ('楷体',25),foreground = 'black',bd = 0,command = selectPlugin).place(x = 115,y = 80)
    window.mainloop() 

#在被运行的情况下运行主窗口
if __name__ == '__main__':
    window()

```

实现效果：
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729175637427.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BhbkRhb3hpMjAyMA==,size_16,color_FFFFFF,t_70)
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729175710991.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BhbkRhb3hpMjAyMA==,size_16,color_FFFFFF,t_70)
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729175841471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BhbkRhb3hpMjAyMA==,size_16,color_FFFFFF,t_70)
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729175938431.png)
如果要是再次上传的话：
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729180036276.png)
如果不选择文件的话：
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200729180245131.png)
如果上传不正常拓展名的话：
![在这里插入图片描述](https://pic.2ge.org/cdn/?url=https://img-blog.csdnimg.cn/20200730162345444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BhbkRhb3hpMjAyMA==,size_16,color_FFFFFF,t_70)


大功告成！
